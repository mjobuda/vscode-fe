/*! For license information please see extension.js.LICENSE.txt */
(()=>{"use strict";var e={451:(e,t,n)=>{const r=n(549);e.exports={LANGUAGE_ID:"fe",extensionConfig:function(){return r.workspace.getConfiguration("fe")}}},337:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{a(r.next(e))}catch(e){i(e)}}function c(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,c)}a((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};t.__esModule=!0,t.getFeTempOutputFolder=t.activate=void 0;var i=n(549),s=n(747),c=(n(451),new Map),a=new Map,u=function(){var e=["Error","Newline","Indent","Dedent","Name","Int","Hex","Octal","Binary","Text","True","False","Assert","Break","Continue","Contract","Def","Const","Elif","Else","Emit","Event","Idx","If","Import","Pragma","Pass","For","Pub","Return","Revert","Struct","Type","While","And","As","In","Not","Or","ParenOpen","ParenClose","BracketOpen","BracketClose","BraceOpen","BraceClose","Colon","ColonColon","Comma","Semi","Plus","Minus","Star","Slash","Pipe","Amper","Lt","LtLt","Gt","GtGt","Eq","Dot","Percent","EqEq","NotEq","LtEq","GtEq","Tilde","Hat","StarStar","StarStarEq","PlusEq","MinusEq","StarEq","SlashEq","PercentEq","AmperEq","PipeEq","HatEq","LtLtEq","GtGtEq","Arrow"];e.forEach((function(e,t){return c.set(e,t)}));var t=["declaration","documentation","readonly","static","abstract","deprecated","modification","async"];return t.forEach((function(e,t){return a.set(e,t)})),new i.SemanticTokensLegend(e,t)}();function l(){return i.workspace.workspaceFolders[0].uri.path+"/.vscode/fe_output"}t.activate=function(e){var t=new p;e.subscriptions.push(i.languages.registerDocumentSemanticTokensProvider({language:"fe",scheme:"file"},t,u))},t.getFeTempOutputFolder=l;var p=function(){function e(){}return e.prototype.provideDocumentSemanticTokens=function(e,t){return r(this,void 0,void 0,(function(){var t,n,r=this;return o(this,(function(o){return t=function(){var e;try{var t=l()+"/module.tokens";e=s.readFileSync(t).toString()}catch(e){console.error(e)}return e.split("Token").slice(1,-1)}(),n=new i.SemanticTokensBuilder,t.forEach((function(t){var o;n.push((o=t,function(e,t){return 0==t?0:(e.slice(0,t).match(/\n/g)||"").length}(e.getText(),Number(o.split("\n").slice(1,-2)[3].replace(/\s+/g,"").split(":")[1].replace(",","")))),function(e,t){var n=Number(e.split("\n").slice(1,-2)[3].replace(/\s+/g,"").split(":")[1].replace(",",""));if(0==n)return 0;var r=t.slice(0,n).split("\n");return 1==r.length?r[0].length:r[r.length-1].length}(t,e.getText()),function(e){var t=Number(e.split("\n").slice(1,-2)[3].replace(/\s+/g,"").split(":")[1].replace(",",""));return Number(e.split("\n").slice(1,-2)[4].replace(/\s+/g,"").split(":")[1].replace(",",""))-t}(t),r._encodeTokenType(function(e){return e.split("\n").slice(1,-2)[0].replace(/\s+/g,"").split(":")[1].replace(",","")}(t)),r._encodeTokenModifiers([]))})),[2,n.build()]}))}))},e.prototype._encodeTokenType=function(e){return c.has(e)?c.get(e):"notInLegend"===e?c.size+2:0},e.prototype._encodeTokenModifiers=function(e){for(var t=0,n=0;n<e.length;n++){var r=e[n];a.has(r)?t|=1<<a.get(r):"notInLegend"===r&&(t|=1<<a.size+2)}return t},e}()},129:e=>{e.exports=require("child_process")},747:e=>{e.exports=require("fs")},622:e=>{e.exports=require("path")},549:e=>{e.exports=require("vscode")}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}var r={};(()=>{var e=r;const t=n(549);var o=n(622);const i=n(747),s=n(129).execSync,c=(n(129).exec,n(451)),a=n(337);var u,l=[];async function p(e){e.fileName.endsWith(".git")?m(e.fileName.slice(0,-4)):m(e.fileName)}async function f(e){t.window.activeTextEditor.document.languageId,c.LANGUAGE_ID}function d(e){const n=t.Uri.file(e);t.workspace.openTextDocument(n).then((e=>{t.window.showTextDocument(e)}))}function h(e){var t=[];return i.readdirSync(e).forEach((n=>{const r=e+"/"+n;i.statSync(r).isDirectory()?t=t.concat(h(r)):t.push(r)})),t}function g(){return c.extensionConfig().command}function m(e){!function(e){const n=a.getFeTempOutputFolder(),r="rm -rf "+n;if(e.endsWith(".git")&&(e=e.slice(0,-4)),!e.endsWith(".fe"))return;const o=g()+" "+e+" --overwrite --emit=abi,bytecode,ast,tokens,yul,loweredAst --output-dir "+n;s(r).toString();try{s(o)}catch(e){t.window.showErrorMessage("[Compiler Exception] "+e)}}(e);const n=c.extensionConfig().options;if(e.endsWith(".git")&&(e=e.slice(0,-4)),!e.endsWith(".fe"))return;const r=t.workspace.workspaceFolders[0].uri.path+"/"+c.extensionConfig().outputFolder,o="rm -rf "+r,i=g()+" "+e+" "+n+" --output-dir "+r;s(o);try{s(i)}catch(e){t.window.showErrorMessage("[Compiler Exception] "+e)}l=[e].concat(h(r))}e.activate=function(e){const n=t.window.activeTextEditor;u=n;let r=t.commands.registerCommand("fe.openAST",(()=>{t.workspace.workspaceFolders[0].uri.path;var e=t.window.activeTextEditor.document.fileName,n=o.basename(e);if(n.endsWith(".git")&&(t.window.showErrorMessage("git git"),n=n.slice(0,-4)),0!=l.length){let t=l.indexOf(e);-1!=t&&(t<l.length-1?d(l[t+1]):d(l[0]))}}));e.subscriptions.push(r),c.LANGUAGE_ID,e.subscriptions.push(t.languages.reg),t.languages.setLanguageConfiguration(c.LANGUAGE_ID,{onEnterRules:[{beforeText:/^\s*(?:pub|struct|def|class|for|if|elif|else|while|try|with|finally|except|async).*?:\s*$/,action:{indentAction:t.IndentAction.Indent}}]}),c.LANGUAGE_ID,f(),p(n.document),t.window.onDidChangeActiveTextEditor((e=>{u=e,e&&f()}),null,e.subscriptions),t.workspace.onDidChangeTextDocument((e=>{u&&e.document===u.document&&f()}),null,e.subscriptions),t.workspace.onDidSaveTextDocument((t=>{p(t),a.activate(e)}),null,e.subscriptions),a.activate(e),t.workspace.onDidOpenTextDocument((e=>{p(e)}),null,e.subscriptions)}})(),module.exports=r})();
//# sourceMappingURL=extension.js.map